# mcp (Model Context Protocol)

MCP (Model Context Protocol) — это система, позволяющая расширять возможности, используя серверы, предоставляющие инструменты и ресурсы.

## Основные характеристики MCP-серверов:

*   **Неинтерактивная среда:** MCP-серверы работают в среде, не требующей прямого взаимодействия с пользователем во время выполнения. Они не могут инициировать OAuth-потоки, открывать окна браузера или запрашивать ввод пользователя в процессе работы.
*   **Предварительная аутентификация:** Все учетные данные и токены аутентификации должны быть предоставлены заранее через переменные окружения в конфигурации настроек MCP.
*   **Предпочтение инструментам:** При создании MCP-серверов предпочтение следует отдавать инструментам (tools), так как они более гибки и могут обрабатывать динамические параметры по сравнению с ресурсами (resources).

## Создание MCP-сервера:

Для создания нового MCP-сервера можно использовать утилиты, такие как `create-typescript-server`, для инициализации проекта. Процесс создания включает в себя:

1.  **Инициализация проекта:** Использование `create-typescript-server` для создания базовой структуры сервера.
2.  **Разработка функционала:** Реализация инструментов (tools) для выполнения задач, например, получение данных о погоде с помощью внешних API (как в примере с OpenWeather API).
3.  **Сборка сервера:** Компиляция кода сервера в исполняемый JavaScript-файл (например, с помощью `npm run build`).

## Установка MCP-сервера:

После создания и сборки MCP-сервера его необходимо установить, добавив конфигурацию в файл настроек.

1.  **Конфигурационный файл:** Файл настроек MCP обычно находится по пути `~/.config/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json`.
2.  **Объект `mcpServers`:** В этом файле существует объект `mcpServers`, куда добавляется конфигурация нового сервера.
3.  **Параметры конфигурации:**
    *   `command`: Команда для запуска сервера (например, `node`).
    *   `args`: Аргументы для команды (путь к скомпилированному файлу сервера).
    *   `env`: Переменные окружения, необходимые для работы сервера (например, API-ключи).
4.  **Значения по умолчанию:** Любые новые MCP-серверы должны по умолчанию иметь `disabled=false` и `autoApprove=[]`.

**Пример конфигурации:**

```json
{
  "mcpServers": {
    "weather": {
      "command": "node",
      "args": ["/path/to/weather-server/build/index.js"],
      "env": {
        "OPENWEATHER_API_KEY": "user-provided-api-key"
      }
    }
  }
}
```

После редактирования файла настроек система автоматически запустит установленные серверы, и их инструменты/ресурсы станут доступны.

## Когда MCP-серверы НЕобходимы:

MCP-серверы следует создавать и устанавливать только тогда, когда это явно требуется пользователем (например, "добавь инструмент, который..."). В случаях, когда задачу можно выполнить с помощью уже существующих инструментов, следует предпочитать их.
